# Make 是如何工作的

Make 命令执行过程
1. make 会在当前目录下找名称为 "Makefile" 或 "makefile" 的文件
2. 如果找到有这样的文件，会在文件中找到第一个目标文件，并把该目标文件作为最终的目标文件
3. 如果最终的目标文件不存在，或者该目标文件所依赖的文件修改时间新与目标文件，那么 make 会去执行下方的执行命令
4. 如果最终目标文件的依赖文件也不存在，那么 make 会在当前文件中寻找目标文件是依赖文件的，如果找到则根据它的依赖文件递归执行生成命令

以 edit 为例解释如下：
1. make 确定 edit 为本 makefile 文件的最终生成目标问及那
2. 根据 edit 是否存在以及 edit 的依赖文件是否新于 edit 文件决定是否需要执行生成 edit 的命令
3. 如果 edit 依赖文件不存在，则在本文件寻找以所有依赖文件为目标文件的 makefile 语句，如果找不到，则报错，找到了，则递归执行步骤 2

上述就是 make 的依赖性，make 会以递归的方式一层一层的去找文件的依赖关系，直到编译出第一个目标文件。

在寻找的过程中，如果出现错误，如某个被依赖的文件找不到，那么 make 会直接退出并报错。对于需要执行的命令执行错误，或者编译不成功，make 则不予理会。

make 只关注文件的依赖性，即如果 make 找到了依赖关系以后，冒号后的依赖文件还是不存在的话，那么 make 就不会执行下去。

make clean 是 make 显示的执行命令，用来清除目标文件，以便于重新编译。

