# Make 的工作方式

1. 读入所有的 Makefile
2. 读入被 include 的其他 Makefile
3. 初始化文件中的变量
4. 推导隐式规则，并分析所有规则
5. 为所有的目标文件创建依赖关系链
6. 根据依赖关系，决定哪些目标要重新生成
7. 执行生成命令

1~5 步骤是第一阶段，6~7 是第二阶段。
第一个阶段中如果定义的变量被使用了，那么 make 将会展开在使用位置。但是 make 并不会完全展开，make 使用的是拖延战术，如果变量出现在依赖关系的规则中，那么仅当这条依赖被决定要使用了，变量才会在命令中展开。